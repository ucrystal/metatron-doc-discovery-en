

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Rule types &mdash; metatron discovery docs 0.4.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/layout.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/layout.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Create a data snapshot" href="create_a_datasnapshot.html" />
    <link rel="prev" title="Edit rules" href="edit_rules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/metatron-docs-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.4.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference external" href="https://metatron-app.github.io/metatron-doc-discovery">한국어로 보기</a></li>
</ul>
<p class="caption"><span class="caption-text">Metatron Discovery</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../part00/index.html">Discovery Quick Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part01/index.html">Introduction of Metatron Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part02/index.html">Data Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part03/index.html">Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part04/index.html">Workbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part05/index.html">Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part06/index.html">Workbench</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Data Preparation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create_a_dataset.html">Create a dataset</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="manage_dataflow.html">Manage a dataflow</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="add_datasets.html">Add a dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="edit_rules.html">Edit rules</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Rule types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#drop">drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#header">header</a></li>
<li class="toctree-l4"><a class="reference internal" href="#settype">settype</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setformat">setformat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rename">rename</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keep">keep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete">delete</a></li>
<li class="toctree-l4"><a class="reference internal" href="#replace">replace</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set">set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#derive">derive</a></li>
<li class="toctree-l4"><a class="reference internal" href="#split">split</a></li>
<li class="toctree-l4"><a class="reference internal" href="#merge">merge</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extract">extract</a></li>
<li class="toctree-l4"><a class="reference internal" href="#countpattern">countpattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nest">nest</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unnest">unnest</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flatten">flatten</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aggregate">aggregate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pivot">pivot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unpivot">unpivot</a></li>
<li class="toctree-l4"><a class="reference internal" href="#join">join</a></li>
<li class="toctree-l4"><a class="reference internal" href="#union">union</a></li>
<li class="toctree-l4"><a class="reference internal" href="#window">window</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="create_a_datasnapshot.html">Create a data snapshot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_snapshot.html">Use data snapshot results</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">metatron discovery docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Data Preparation</a> &raquo;</li>
        
          <li><a href="manage_dataflow.html">Manage a dataflow</a> &raquo;</li>
        
      <li>Rule types</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/discovery/part07/rule_kinds.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Rule types<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>This section describes each rule in terms of the following.</p>
<blockquote>
<div><ul class="simple">
<li><p>Name of rule</p></li>
<li><p>Required arguments</p></li>
<li><p>Optional arguments</p></li>
<li><p>Description</p></li>
<li><p>Notes</p></li>
</ul>
</div></blockquote>
<p>The types of rules supported in data preparation are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#drop">drop</a></p></li>
<li><p><a class="reference internal" href="#header">header</a></p></li>
<li><p><a class="reference internal" href="#settype">settype</a></p></li>
<li><p><a class="reference internal" href="#setformat">setformat</a></p></li>
<li><p><a class="reference internal" href="#rename">rename</a></p></li>
<li><p><a class="reference internal" href="#keep">keep</a></p></li>
<li><p><a class="reference internal" href="#delete">delete</a></p></li>
<li><p><a class="reference internal" href="#replace">replace</a></p></li>
<li><p><a class="reference internal" href="#set">set</a></p></li>
<li><p><a class="reference internal" href="#derive">derive</a></p></li>
<li><p><a class="reference internal" href="#split">split</a></p></li>
<li><p><a class="reference internal" href="#merge">merge</a></p></li>
<li><p><a class="reference internal" href="#extract">extract</a></p></li>
<li><p><a class="reference internal" href="#countpattern">countpattern</a></p></li>
<li><p><a class="reference internal" href="#nest">nest</a></p></li>
<li><p><a class="reference internal" href="#unnest">unnest</a></p></li>
<li><p><a class="reference internal" href="#flatten">flatten</a></p></li>
<li><p><a class="reference internal" href="#aggregate">aggregate</a></p></li>
<li><p><a class="reference internal" href="#pivot">pivot</a></p></li>
<li><p><a class="reference internal" href="#unpivot">unpivot</a></p></li>
<li><p><a class="reference internal" href="#join">join</a></p></li>
<li><p><a class="reference internal" href="#union">union</a></p></li>
<li><p><a class="reference internal" href="#window">window</a></p></li>
</ul>
</div></blockquote>
<p>In addition to these rules, data preparation provides various expressions, thereby supporting almost every function required for general data preprocessing.</p>
<div class="section" id="drop">
<h2>drop<a class="headerlink" href="#drop" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>Deletes the selected columns.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="header">
<h2>header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<p>Required arguments: Row number that contains the column name (1-base)</p>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>This rule sets the content in the designated row as the column name.</p></li>
<li><p>This is useful for reading a CSV file with column names in the first row.</p></li>
<li><p>Unless otherwise specified, data preparation automatically performs header. This rule may be deleted if header results are not desired, but such cases are not common.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="settype">
<h2>settype<a class="headerlink" href="#settype" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
<li><p>New type: Select one out of Long, Double, String, Boolean, and Timestamp</p></li>
</ul>
</div></blockquote>
<p>Optional arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Set format: A format string (Joda Time) in the case of timestamp</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>This rule changes the type of the selected columns.</p></li>
<li><p>The rule is considered successful even if the result is a type mismatch, which should be separately addressed.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="setformat">
<h2>setformat<a class="headerlink" href="#setformat" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
<li><p>Set format: A Joda-Time format string</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>This rule changes the display format of a Timestamp column.</p></li>
<li><p>The target column must be of the Timestamp type.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul>
<li><p>As shown below, the format input field lists different entries depending on the input. The candidate list is narrowed as more values are entered.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_setformat_1.png" src="../../_images/rule_kinds_setformat_1.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="rename">
<h2>rename<a class="headerlink" href="#rename" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A single target column</p></li>
<li><p>New column name: New name</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul>
<li><p>This rule changes the name of the selected column.</p></li>
<li><p>To rename two or more columns at once, click the <strong>Rename multiple columns</strong> button at the bottom of the command input panel to display the following popup.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_rename_1.png" src="../../_images/rule_kinds_rename_1.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="keep">
<h2>keep<a class="headerlink" href="#keep" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Condition: A conditional expression returning a Boolean value</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul>
<li><p>All rows are deleted except the rows that return true for the conditional expression.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_keep_1.png" src="../../_images/rule_kinds_keep_1.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="delete">
<h2>delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Condition: A conditional expression returning a Boolean value</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>All rows that return true for the conditional expression are deleted. This is the opposite of <a class="reference internal" href="#keep">keep</a>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="replace">
<h2>replace<a class="headerlink" href="#replace" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_replace_1.png" src="../../_images/rule_kinds_replace_1.png" />
</div>
<p>Required arguments</p>
<blockquote>
<div><ul>
<li><p>Column: A list of target columns</p></li>
<li><p>Pattern: A string pattern to be replaced</p>
<blockquote>
<div><ul class="simple">
<li><p>In the case of a constant string: Characters enclosed inside <code class="docutils literal notranslate"><span class="pre">'</span></code> (<code class="docutils literal notranslate"><span class="pre">'Houston'</span></code>, <code class="docutils literal notranslate"><span class="pre">'Naperville'</span></code>, <code class="docutils literal notranslate"><span class="pre">'Philadelphia'</span></code> etc.)</p></li>
<li><p>In the case of a regular expression: Characters enclosed inside <code class="docutils literal notranslate"><span class="pre">/</span></code> (<code class="docutils literal notranslate"><span class="pre">/[</span> <span class="pre">,_]+/</span></code>, <code class="docutils literal notranslate"><span class="pre">/\s+$/</span></code>, etc.)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>New value: A new string expression to replace the specified pattern</p>
<blockquote>
<div><ul class="simple">
<li><p>Constant string</p></li>
<li><p>Regular expression <code class="docutils literal notranslate"><span class="pre">$1_$2_$3</span></code>, etc.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Optional arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Ignore between characters: Does not make any replacement for content between the characters entered here</p></li>
<li><p>Match all occurrences: Whether all characters of a word must match</p></li>
<li><p>Ignore case: Whether to make the strings case-insensitive</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>String replacement is performed for the selected columns.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>Do not use <code class="docutils literal notranslate"><span class="pre">'</span></code> or <code class="docutils literal notranslate"><span class="pre">/</span></code> in a <strong>new value</strong>.</p></li>
<li><p>Values from other columns are not available as <strong>new values</strong>. replace performs string replacement for content in the selected columns only. (cf. <a class="reference internal" href="#set">set</a> rule)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="set">
<h2>set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_set_1.png" src="../../_images/rule_kinds_set_1.png" />
</div>
<p>Required arguments</p>
<blockquote>
<div><ul>
<li><p>Column: A list of target columns</p></li>
<li><p>Expression: An expression to be applied to the values of the target column. Values from other columns may be referenced. (cf. <a class="reference internal" href="#replace">replace</a> rule)</p>
<blockquote>
<div><ul class="simple">
<li><p>When multiple columns are involved, use a <code class="docutils literal notranslate"><span class="pre">$col</span></code> variable, which will be substituted by the respective target column during each conversion.</p></li>
<li><p>That is, when applying the set command on <code class="docutils literal notranslate"><span class="pre">column1</span></code> and <code class="docutils literal notranslate"><span class="pre">column2</span></code>, <code class="docutils literal notranslate"><span class="pre">$col</span></code> becomes <code class="docutils literal notranslate"><span class="pre">column1</span></code> during conversion of <code class="docutils literal notranslate"><span class="pre">column1</span></code>, and <code class="docutils literal notranslate"><span class="pre">$col</span></code> becomes <code class="docutils literal notranslate"><span class="pre">column2</span></code> during conversion of <code class="docutils literal notranslate"><span class="pre">column2</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Optional arguments</p>
<blockquote>
<div><ul>
<li><p>Use only under the following conditions</p>
<blockquote>
<div><ul class="simple">
<li><p>The set rule is applied only to rows satisfying this condition.</p></li>
<li><p>This rule may be regarded the same as the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> statement in SQL.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul>
<li><p>This rule replaces the values in the selected column with results returned by the expression.</p></li>
<li><p>When using a complex expression, click the <strong>Advanced editor</strong> to display the popup shown below:</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_set_2.png" src="../../_images/rule_kinds_set_2.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>In the <strong>Advanced editor</strong>, you can edit the expression in a larger window while viewing the column list and a list of functions and their descriptions, and also run a validity check before implementing the expression.</p>
</div>
<div class="section" id="derive">
<h2>derive<a class="headerlink" href="#derive" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Expression: An expression whose resulting values are to form a new column. Similar to the <a class="reference internal" href="#set">set</a> rule, values from other columns may be referenced.</p></li>
<li><p>New column name</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>While similar to the <a class="reference internal" href="#set">set</a> rule, this rule creates a new column instead of replacing an existing one.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>The new column is inserted after the last existing column in the expression.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="split">
<h2>split<a class="headerlink" href="#split" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
<li><p>Pattern: A string expression that serves as a separator that splits the target strings. Allows a regular expression as is the case for the <a class="reference internal" href="#replace">replace</a> rule.</p></li>
<li><p>Number: Number of columns to be divided into.</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>Each row is split by the given <strong>Number</strong> - 1.</p></li>
<li><p>When the pattern is no longer matched, the rest columns contain a <cite>null</cite>.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>Note that columns are created as many as the <strong>Number</strong> input.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="merge">
<h2>merge<a class="headerlink" href="#merge" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
<li><p>Delimiter: A constant string with which values of different columns are concatenated.</p></li>
<li><p>New column name</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>The target columns are merged with the <strong>Delimiter</strong> into a new column.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>Similar to the <a class="reference internal" href="#replace">replace</a> rule, enclosing with a <code class="docutils literal notranslate"><span class="pre">'</span></code> may be skipped. That is, strings not enclosed by <code class="docutils literal notranslate"><span class="pre">/</span></code> or <code class="docutils literal notranslate"><span class="pre">'</span></code> are automatically enclosed by <code class="docutils literal notranslate"><span class="pre">'</span></code>.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="extract">
<h2>extract<a class="headerlink" href="#extract" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
<li><p>Pattern: A string pattern to be extracted. Allows a regular expression as is the case for the <a class="reference internal" href="#replace">replace</a> rule.</p></li>
<li><p>Number: Number of instances to be extracted</p></li>
</ul>
</div></blockquote>
<p>Optional arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Ignore between characters: Does not make any replacement for content between the characters entered here</p></li>
<li><p>Ignore case: Whether to make the strings case-insensitive</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>A new column(s) with content matching the given pattern is created.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>When there are multiple target columns, the resulting columns are inserted after each target column.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="countpattern">
<h2>countpattern<a class="headerlink" href="#countpattern" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
<li><p>Pattern: A string pattern to be detected. Allows a regular expression as is the case for the <a class="reference internal" href="#replace">replace</a> rule.</p></li>
</ul>
</div></blockquote>
<p>Optional arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Ignore between characters: Does not make any replacement for content between the characters entered here</p></li>
<li><p>Ignore case: Whether to make the strings case-insensitive</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>New columns are created based on the number of matches with the pattern.</p></li>
<li><p>This is highly similar to <a class="reference internal" href="#extract">extract</a>. The only difference is that it counts the number of matches, rather than extracting the matched content.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>When there are multiple target columns, the resulting columns are inserted after each target column.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="nest">
<h2>nest<a class="headerlink" href="#nest" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns</p></li>
<li><p>Type: Map or Array</p></li>
<li><p>New column name</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul>
<li><p>The target columns are grouped into a new column of the given type.</p></li>
<li><p>Below are examples of grouping columns into an array and map, respectively.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_nest_1.png" src="../../_images/rule_kinds_nest_1.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="unnest">
<h2>unnest<a class="headerlink" href="#unnest" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_unnest_1.png" src="../../_images/rule_kinds_unnest_1.png" />
</div>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A single target column</p></li>
<li><p>Select elements: <em>0-base</em> index for an array, or key value for a map</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>A new column is created by extracting the selected elements from an array or a map.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>The target column must be of the array or map type.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="flatten">
<h2>flatten<a class="headerlink" href="#flatten" title="Permalink to this headline">¶</a></h2>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A single target column</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>Rows are created from elements of an array.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul>
<li><p>The target column must be of the array type.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_flatten_1.png" src="../../_images/rule_kinds_flatten_1.png" />
</div>
</div></blockquote>
</li>
</ul>
<p>If the target array column has four elements as shown in the above example, each original row of the array results in four rows. Non-array columns result in the same columns.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_flatten_2.png" src="../../_images/rule_kinds_flatten_2.png" />
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="aggregate">
<h2>aggregate<a class="headerlink" href="#aggregate" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_aggregate_1.png" src="../../_images/rule_kinds_aggregate_1.png" />
</div>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Expression: A list of aggregate functions</p></li>
<li><p>Group by: A list of columns that group values by.</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul>
<li><p>A new column is added from the results of grouping by each combination of the elements from the GroupBy columns.</p></li>
<li><p>A column is created for each expression. For example, two columns are created if average and count are designated as expressions.</p></li>
<li><p>The available aggregate functions are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>count()</p></li>
<li><p>sum(<em>colname</em>)</p></li>
<li><p>avg(<em>colname</em>)</p></li>
<li><p>min(<em>colname</em>)</p></li>
<li><p>max(<em>colname</em>)</p></li>
</ul>
<p>Notes</p>
</div></blockquote>
</li>
<li><p>Calculations are performed only for sampling results. Therefore, the snapshot?the results for the entire data?may be different.</p></li>
<li><p>Note that <code class="docutils literal notranslate"><span class="pre">()</span></code> must be inserted when using the count function.</p></li>
<li><p>count(<em>colname</em>) is currently not available.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_aggregate_2.png" src="../../_images/rule_kinds_aggregate_2.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="pivot">
<h2>pivot<a class="headerlink" href="#pivot" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_pivot_1.png" src="../../_images/rule_kinds_pivot_1.png" />
</div>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of columns subject to pivoting</p></li>
<li><p>Expression: A list of expressions whose resulting values form new columns (only aggregate functions are available)</p></li>
<li><p>Group by: A list of columns that group values by.</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>Group By is performed for each combination of target columns and GroupBy columns. A dataset having the results as column values is created.</p></li>
<li><p>A set of columns is created for each expression. For example, if average and count are designated as expressions and the values in the pivoted columns are divided into ten groups, a total of 20 columns will be created.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul>
<li><p>This is used when performing GroupBy on at least two columns. (1 pivoted column, 1 GroupBy column)</p></li>
<li><p>Here, <strong>Rename multiple columns</strong> is useful as column names tend to get longer.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_pivot_2.png" src="../../_images/rule_kinds_pivot_2.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="unpivot">
<h2>unpivot<a class="headerlink" href="#unpivot" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_unpivot_1.png" src="../../_images/rule_kinds_unpivot_1.png" />
</div>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Column: A list of target columns to be converted into values in new columns</p></li>
<li><p>GroupEvery: Number of columns (defaults to 1)</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>Two columns are created?one contains the selected column names and the other contains their values. (If GroupEvery is set to 1)</p></li>
<li><p>If GroupEvery is the same as the number of selected columns, each resulting pair of columns contains the name and values of its respective original column. Therefore, If 10 columns are unpivoted with the GroupEvery argument set to 10, for example, a total of 20 columns are created.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul>
<li><p>Using the GroupEvery argument set to a factor of the number of columns will soon be supported.</p>
<blockquote>
<div><p>&lt;Where GroupEvery is set to 1&gt;</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_unpivot_2.png" src="../../_images/rule_kinds_unpivot_2.png" />
</div>
</div></blockquote>
<p>&lt;Where GroupEvery is set to the same as the number of columns&gt;</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_unpivot_3.png" src="../../_images/rule_kinds_unpivot_3.png" />
</div>
</div></blockquote>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="join">
<h2>join<a class="headerlink" href="#join" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_join_1.png" src="../../_images/rule_kinds_join_1.png" />
</div>
<p>Unlike other rules, join has a separate popup.</p>
<p>Required arguments (select in a popup or enter a value)</p>
<blockquote>
<div><ul class="simple">
<li><p>Dataset to join: A wrangled dataset in the same dataflow</p></li>
<li><p>Columns to join (toggle)</p></li>
<li><p>Join keys: Multiple values may be entered</p></li>
<li><p>Join type: Only inner join supported now</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>Joins to the target dataset to create new columns.</p></li>
<li><p>This rule is the same as <code class="docutils literal notranslate"><span class="pre">join</span></code> used by a relational database.</p></li>
<li><p>The results can be previewed by clicking the <strong>Show result</strong> button.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul>
<li><p>The join keys must be included in the columns to join.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_join_2.png" src="../../_images/rule_kinds_join_2.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="union">
<h2>union<a class="headerlink" href="#union" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_union_1.png" src="../../_images/rule_kinds_union_1.png" />
</div>
<p>Similar to <a class="reference internal" href="#join">join</a>, union has a separate popup.</p>
<p>Required arguments (select in a popup)</p>
<blockquote>
<div><ul class="simple">
<li><p>Datasets to union: Multiple selections allowed.</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul class="simple">
<li><p>The content of the selected datasets is also processed.</p></li>
<li><p>This rule is the same as <code class="docutils literal notranslate"><span class="pre">union</span> <span class="pre">all</span></code> used by a relational database.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul>
<li><p>The target datasets must coincide with the dataset that unions them in terms of column name, type, and number of columns.</p>
<blockquote>
<div><div class="figure align-center">
<img alt="../../_images/rule_kinds_union_2.png" src="../../_images/rule_kinds_union_2.png" />
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="window">
<h2>window<a class="headerlink" href="#window" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_window_1.png" src="../../_images/rule_kinds_window_1.png" />
</div>
<div class="figure align-center">
<img alt="../../_images/rule_kinds_window_2.png" src="../../_images/rule_kinds_window_2.png" />
</div>
<p>Required arguments</p>
<blockquote>
<div><ul class="simple">
<li><p>Expression: A list of window functions</p></li>
<li><p>Group by: A list of columns that group values by. Row order created within each group. If not specified, the whole data is sorted based on the Sort by setting.</p></li>
<li><p>Sort by: Specifies columns by which the order of rows is determined. If not specified, data is sorted in the order of being inputted.</p></li>
</ul>
</div></blockquote>
<p>Description</p>
<blockquote>
<div><ul>
<li><p>Column values are created by calculating with the values of the preceding and following rows.</p></li>
<li><p>The rows are grouped first and then sorted within each group in the specified column order.</p>
<blockquote>
<div><ul class="simple">
<li><p>In the above example, each row value is averaged with the three preceding and following rows within the same State group.</p></li>
<li><p>If an immediately preceding row does not have the same state, earlier rows are searched.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The currently available window functions are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>row_number()</p></li>
<li><p>lead(<em>colname</em>, <em>int</em>)</p></li>
<li><p>lag(<em>colname</em>, <em>int</em>)</p></li>
<li><p>rolling_sum(<em>colname</em>, <em>int</em>, <em>int</em>)</p></li>
<li><p>rolling_avg(<em>colname</em>, <em>int</em>, <em>int</em>)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>In addition to window functions, aggregate functions may be used.</p></li>
</ul>
</div></blockquote>
<p>Notes</p>
<blockquote>
<div><ul class="simple">
<li><p>When using window functions, error messages may not be properly displayed in the event of insufficient arguments.</p></li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="create_a_datasnapshot.html" class="btn btn-neutral float-right" title="Create a data snapshot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="edit_rules.html" class="btn btn-neutral float-left" title="Edit rules" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, metatron team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>