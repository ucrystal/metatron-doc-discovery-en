워크벤치 사용하기
---------------------------------------------

.. |icon_exclamation| image:: /_static/img/discovery/part06/icon_exclamation.png
.. |icon_folding| image:: /_static/img/discovery/part06/icon_folding.png
.. |icon_arrow| image:: /_static/img/discovery/part06/icon_arrow.png
.. |icon_more| image:: /_static/img/discovery/part06/icon_more.png
.. |icon_full| image:: /_static/img/discovery/part06/icon_full.png
.. |icon_plus| image:: /_static/img/discovery/part06/icon_plus.png

워크벤치에서는 SQL 데이터베이스 편집 및 관리가 용이하며 쿼리 결과를 다양한 형태로 시각화하여 저장할 수 있습니다. 워크벤치의 화면은 다음과 같은 5개의 영역으로 나뉘며, 추가적으로 스키마 브라우저를 열 수 있습니다.

	.. figure:: /_static/img/discovery/part06/workbench_basic.png
		:align: center

	#. 기본 정보 영역(:ref:`workbench_use_1` 참조)
	#. 스키마 및 테이블 영역(:ref:`workbench_use_2` 참조)
	#. 쿼리 에디터 영역(:ref:`workbench_use_3` 참조)
	#. 쿼리 결과 영역(:ref:`workbench_use_4` 참조)
	#. 추가 도구 영역(:ref:`workbench_use_5` 참조)
	#. 스키마 브라우저(:ref:`workbench_use_6` 참조)

.. _workbench_use_1:

기본 정보 영역
=================================================

현재 작업하는 워크벤치에 관한 정보가 나타나는 영역입니다.

	.. figure:: /_static/img/discovery/part06/workbench_lnb_header.png
		:align: center

	#. **이름:** 워크벤치의 이름입니다. 클릭하여 이름을 변경할 수 있습니다.
	#. **데이터 커넥션:** 해당 워크벤치와 연결되어 있는 데이터 커넥션의 이름입니다. |icon_exclamation| 아이콘을 클릭하면 자세한 정보가 나타납니다.
	#. |icon_folding| : 패널을 접고 펼치는 UI 버튼입니다

.. _workbench_use_2:

스키마 및 테이블 영역
=================================================

원하는 데이터베이스, 테이블, 컬럼을 손쉽게 쿼리 에디터에 입력할 수 있는 UI 기능입니다.

	.. figure:: /_static/img/discovery/part06/workbench_lnb.png
		:align: center

	#. **데이터베이스 이름:** 현재 선택된 데이터베이스의 이름을 출력해줍니다. 해당 워크벤치에 등록된 데이터 커넥션의 첫 번째 데이터베이스를 기본적으로 선택됩니다. 클릭하면 데이터 커넥션에 포함된 모든 데이터베이스가 조회되며, 그 중에 하나를 선택하면 해당 데이터베이스로 변경됩니다.
	#. **스키마 브라우저:** 선택된 데이터베이스의 테이블 목록과 각 테이블에 속한 모든 컬럼 및 레코드 정보를 확인할 수 있는 스키마 브라우저 화면이 팝업됩니다.
	#. **테이블 검색:** 선택된 데이터베이스에 등록된 테이블을 이름으로 검색합니다.
	#. **테이블 이름:** 필요한 데이터를 담은 테이블을 선택하면, 오른쪽 쿼리 에디터에 해당 테이블에 대한 ``SELECT \* FROM {table name}`` 쿼리가 자동으로 입력됩니다.
	#. **컬럼 목록:** 해당 테이블에 속한 모든 컬럼 이름과 각각의 데이터 타입이 나타납니다. 컬럼 이름을 클릭하면 쿼리 에디터에 자동으로 삽입됩니다.

.. _workbench_use_3:

쿼리 에디터 영역
=================================================

쿼리를 작성하고 실행할 수 있는 에디터 화면입니다.

	.. figure:: /_static/img/discovery/part06/workbench_query_editor.png
		:align: center

	#. |icon_arrow| : 탭이 너무 많을 경우 탭 영역을 좌우로 스크롤 할수 있는 버튼입니다. 탭의 개수가 많지 않은 경우 나타나지 않습니다.
	#. **탭:** 쿼리 관리를 위해 여러 개의 탭으로 나누어서 쿼리를 실행하거나 저장할 수 있습니다. |icon_more| 버튼을 클릭 시 탭 제목의 수정과 탭 삭제가 가능합니다.
	#. |icon_plus| : 이 버튼을 클릭하면 새로운 탭이 추가됩니다.
	#. |icon_full| : 이 버튼을 클릭하면 쿼리 에디터 영역을 전체화면으로 확장하거나 축소 할 수 있습니다.
	#. **쿼리 행:** 쿼리 코드의 행 번호를 보여줍니다.
	#. **에디터 화면:** 이 곳에 쿼리 문을 작성합니다. 멀티 쿼리의 실행 및 단일 쿼리의 실행이 가능합니다. ``;``\을 쿼리 문이 끝날 때마다 삽입하면 쿼리를 나눠서 실행이 가능합니다. 자동완성 기능이 제공됩니다.
	#. **쿼리 전체 실행:** 쿼리 에디터에 작성된 전체 쿼리를 실행합니다. (단축키: Ctrl + Enter)
	#. **쿼리 부분 실행:** 쿼리 문 안에서 마우스가 위치된 특정 쿼리 또는 드래그하여 선택된 영역만 쿼리를 실행합니다. (단축키: Command + Enter)
	#. **CLEAR SQL:** 쿼리 문을 모두 삭제 합니다.
	#. **SQL BEAUTIFIER:** 이 버튼을 클릭하면 작성된 쿼리 문이 쿼리 문법 표준에 맞게 정렬됩니다.
	#. **Query History:** 쿼리 에디터에서 수행한 과거 목록을 조회할수 있으며, 쿼리 선택 시 쿼리문이 쿼리 에디터에 추가됩니다.
	#. **Query Editor 단축키:** 쿼리 에디터에서 사용가능한 단축키 목록입니다.

.. _workbench_use_4:

쿼리 결과 영역
=================================================

쿼리가 실행되면 그 결과가 쿼리 결과 탭에 나타납니다. 모든 쿼리 결과는 계속 누적되지만, 원하는 결과 탭을 자유롭게 삭제할 수 있습니다. 쿼리 결과는 텍스트 그리드 형태로 제공되며, 차트 미리보기, 데이터 소스 저장, 다운로드 CSV 기능이 지원됩니다.

쿼리 수행 중
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

	.. figure:: /_static/img/discovery/part06/workbench_query_result_ing.png
		:align: center

	#. **쿼리 결과 탭:** 다중 쿼리 수행시 쿼리당 하나의 결과 탭이 생성되며 쿼리 수행 중인 탭일 경우 탭 제목에 'Loading' 메시지가 표시됩니다.
	#. **쿼리 로그:** 쿼리 수행 로그를 보여주는 영역입니다. Hive 타입의 커넥션일 경우 Hive Job Log가 추가적으로 표시됩니다.
	#. **쿼리 수행 취소:** 수행중인 쿼리를 취소합니다. DB 타입별 취소에 걸리는 시간이 다소 차이날 수 있습니다.
	#. **쿼리 수행 단계:** 쿼리 수행의 총 5가지 단계 중 현재 단계를 표시합니다.

		* Getting connection
		* Creating statement
		* Executing query
		* Getting result set
		* Done!
		
	#. **다중 쿼리 순서 표시:** 다중 쿼리 수행 시 현재 몇 번째 쿼리를 수행 중인지 표시합니다.
	#. **표시 전환 탭:** 쿼리 수행 로그 탭과 쿼리 결과 탭을 전환하는 버튼입니다.
	#. **쿼리 수행 상태:** 3가지 쿼리 수행 상태를 표시합니다.

		* 쿼리 수행중
		* 쿼리 수행 실패
		* 쿼리 수행 취소
		
	#. **쿼리 수행 시작 시각:** 쿼리 수행 시작 시각을 표시합니다.
	#. **쿼리 수행 경과 시간:** 쿼리 수행 경과 시간을 표시합니다.


쿼리 수행 후
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

	.. figure:: /_static/img/discovery/part06/workbench_query_result_complete.png
		:align: center

	#. **쿼리 결과 탭:** 다중 쿼리 수행시 쿼리당 하나의 결과 탭이 생성되며 쿼리 수행 중인 탭일 경우 탭 제목에 'Loading' 메시지가 표시됩니다.
	#. **데이터 내역:** 쿼리 실행에 의해 출력된 데이터 내역입니다. 출력된 데이터는 클립보드에 복사하여 활용할 수도 있습니다.
	#. **표시 전환 탭:** 쿼리 수행 로그 탭과 쿼리 결과 탭을 전환하는 버튼입니다.
	#. **컬럼 데이터 검색:** 결과 내 컬럼 및 값을 검색할 수 있습니다.
	#. **차트 미리보기:** 쿼리 결과를 이용하여 차트를 가상으로 그려볼 수 있습니다. 시각화를 위해 그려지는 것이고, 실제 워크스페이스 내용에 반영되지는 않습니다. (자세한 조작 방식은 :doc:`../part04/manage_charts` 항목 참조)
	#. **데이터 소스 저장:** 쿼리 결과를 이용하여 워크스페이스 내 데이터 소스로 저장할 수 있습니다. 데이터 소스 생성 팝업이 나타나며, 데이터 커넥션 선택 및 테이블 선택 등의 과정은 워크벤치 결과 내용으로 대체됩니다. 따라서 스키마 정의 및 ingestion 주기 등의 과정이 곧바로 진행되게 됩니다. (자세한 절차는 :doc:`../part02/create_a_data_source` 참조)
	#. **다운로드 CSV:** 쿼리 결과를 로컬 파일(csv)로 다운로드가 가능합니다.
	#. **데이터 페이징:** 1000건의 이상의 데이터일 경우 Prev, Next 버튼을 이용해 페이지 넘김이 가능합니다.
	#. **쿼리 수행 시작 시각:** 쿼리 수행 시작 시각을 표시합니다.
	#. **쿼리 수행 종료 시각:** 쿼리 수행 종료 시각을 표시합니다.
	#. **쿼리 수행 경과 시간:** 쿼리 수행 경과 시간을 표시합니다.
	#. **쿼리 Row 정보:** 쿼리 결과의 Row 숫자와 현재 페이지 정보를 표시합니다.

.. _workbench_use_5:

추가 도구 영역
==========================================

추가 도구 영역은 워크벤치 활용에 도움을 주는 유용한 기능들로 구성되어 있습니다.

	* 반복 사용 구문에 대한 글로벌 변수 설정 (:ref:`global_variable` 참조)
	* 다른 워크벤치로 이동하기 위한 네비게이션 기능 (:ref:`workbench_navigation` 참조)


.. _global_variable:

글로벌 변수(Global variable) 편집 기능
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

어떤 구문이 반복적으로 사용되고 그 내용을 계속 바꿔가면서 쿼리를 실행해야 할 경우, 그 구문을 '글로벌 변수'로 지정해서 사용하면 편리합니다.

	.. figure:: /_static/img/discovery/part06/workbench_global_variable.png
		:align: center
		:scale: 70%

	* **변수 타입:** 글로벌 변수 타입으로는 달력과 텍스트가 제공합니다.
	* **새 변수 추가:** 원하는 변수 종류를 선택한 뒤 새 변수 추가 버튼을 누릅니다. 쿼리 에디터 영역에 해당 글로벌 변수가 추가됩니다.
	* **이름:** 변수 이름을 입력합니다.
	* **변수 값:** 달력은 날짜를 선택, 텍스트는 값을 입력하여 사용할 수 있습니다.

.. _workbench_navigation:

워크벤치 네비게이션
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

다른 워크벤치로 이동하는 기능을 제공합니다. 이동하기를 원하는 워크벤치를 클릭하면 해당 워크벤치로 이동합니다.

	.. figure:: /_static/img/discovery/part06/workbench_navigation.png
		:align: center

	* **워크벤치 검색:** 워크스페이스에 저장된 워크벤치를 검색합니다.
	* **워크벤치 목록:** 워크스페이스에 저장된 모든 워크벤치를 보여줍니다. 나열된 워크벤치 중 하나를 클릭하면 해당 워크벤치로 이동됩니다.

.. _workbench_use_6:

스키마 브라우저
==========================================

선택된 데이터베이스의 테이블 목록과 각 테이블에 속한 컬럼 및 레코드 정보를 확인할 수 있습니다.

	.. figure:: /_static/img/discovery/part06/workbench_schema_browser.png

	* **컬럼:** 선택한 테이블의 모든 컬럼의 이름과 속성을 보여줍니다.
	* **인포메이션:** 선택한 테이블의 속성을 보여줍니다.
	* **데이터:** 선택한 테이블의 데이터를 보여줍니다. 최대 50건의 데이터만 조회할 수 있습니다.